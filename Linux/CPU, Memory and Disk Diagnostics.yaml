- defaultTab: nodes
  description: |-
    Retrieve diagnostic OS, Disk and Memory information from Linux systems.

    This Job connects to remote Linux instances and retrieves diagnostic OS and process-level information. This is meant to assist with diagnosing common incidents on Linux VMs.

    Instances must be added as Nodes in order for this Job to work correctly. See here for details on how to add your Linux instances as Nodes.
  executionEnabled: true
  group: Linux
  id: 9d00056c-59f8-4c0a-a606-adaf667c6c34
  loglevel: INFO
  name: 'CPU, Memory and Disk Diagnostics'
  nodeFilterEditable: true
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: false
      rankOrder: ascending
      successOnEmptyNodeFilter: false
      threadcount: '1'
    filter: osName:Linux
  nodesSelectedByDefault: true
  plugins:
    ExecutionLifecycle: {}
  scheduleEnabled: true
  schedules: []
  sequence:
    commands:
    - description: Top 5 Mem Consuming Processes
      exec: 'ps -eo pmem,pid,cmd | sort -k 1 -nr | head -5'
    - description: Top 5 CPU Consuming Processes
      exec: 'ps -eo pcpu,pid,cmd | sort -k 1 -nr | head -5'
    - description: Get Top 10 Disk Consuming Files
      exec: sudo du -Shx / | sort -rh | head -10
    keepgoing: false
    strategy: node-first
  tags: linux
  uuid: 9d00056c-59f8-4c0a-a606-adaf667c6c34

